<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css" />
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <link rel="stylesheet" href="style.css" />
        <title>Elden Ring Bingo</title>
    </head>
    <body>
        <div style="align-items: center">
            <div style="width: 800px">
                <div
                    style="
                        display: flex;
                        flex-direction: row;
                        gap: 15px;
                        text-align: center;
                        width: 100%;
                        justify-content: space-between;
                        margin-bottom: -3%;
                    "
                >
                    <h1 id="player1" onclick="selectPlayer('#e64972')" style="color: #e64972; cursor: pointer">P1 0</h1>
                    <h1 onclick="startBingo()" style="text-align: center; color: #ffb300; cursor: pointer">
                        Elden Ring Bingo!
                    </h1>
                    <h1 id="player2" onclick="selectPlayer('#5849e6')" style="color: #5849e6; cursor: pointer">P2 0</h1>
                </div>
                <div
                    id="selectedColor"
                    style="color: #e64972; font-weight: bold; text-align: center; margin-bottom: -3%"
                >
                    Eres el jugador 1
                </div>
            </div>
            <table>
                <tr>
                    <td id="1">Nothing yet</td>
                    <td id="2">Nothing yet</td>
                    <td id="3">Nothing yet</td>
                    <td id="4">Nothing yet</td>
                    <td id="5">Nothing yet</td>
                </tr>
                <tr>
                    <td id="6">Nothing yet</td>
                    <td id="7">Nothing yet</td>
                    <td id="8">Nothing yet</td>
                    <td id="9">Nothing yet</td>
                    <td id="10">Nothing yet</td>
                </tr>
                <tr>
                    <td id="11">Nothing yet</td>
                    <td id="12">Nothing yet</td>
                    <td id="13">Nothing yet</td>
                    <td id="14">Nothing yet</td>
                    <td id="15">Nothing yet</td>
                </tr>
                <tr>
                    <td id="16">Nothing yet</td>
                    <td id="17">Nothing yet</td>
                    <td id="18">Nothing yet</td>
                    <td id="19">Nothing yet</td>
                    <td id="20">Nothing yet</td>
                </tr>
                <tr>
                    <td id="21">Nothing yet</td>
                    <td id="22">Nothing yet</td>
                    <td id="23">Nothing yet</td>
                    <td id="24">Nothing yet</td>
                    <td id="25">Nothing yet</td>
                </tr>
            </table>
        </div>

        <script>
            var player = "#e64972";
            var player1Score = 0;
            var player2Score = 0;
            var winner = "";
            const bingo = [
                { name: "Kill Godrick while summoning Nepheli Loux" },
                { name: "Kill Rennala after she summons all 4 different spirits" },
                { name: "Kill Radahn without summoning NPCs" },
                { name: "Kill Rykard and discard Serpent Hunter +0" },
                { name: "Kill Morgott" },
                { name: "Kill an Ancestor Spirit" },
                { name: "Kill Mohg, Lord of Blood" },
                { name: "Kill Margit with 4+ parries" },
                { name: "Kill Leonine Misbegotten" },
                { name: "Kill a Red Wolf Boss" },
                { name: "Kill Godskin Noble (Volcano Manor) without status effects" },
                { name: "Kill a Godskin Apostle" },
                { name: "Kill Godfrey (Gold Spirit)" },
                { name: "Kill Mimic Tear consumables only" },
                { name: "Kill Valiant Gargoyles" },
                { name: "Kill Fia's Champions" },
                { name: "Kill Mohg (Sewers)" },
                { name: "Kill Loretta (Blue Spirit)" },
                { name: "Kill Commander O'Neil" },
                { name: "Kill Grafted Scion (Chapel of Anticipation)" },
                { name: "Kill Soldier of Godrick bare fist only" },
                { name: "Kill Limgrave Tree Sentinel with a +0 weapon" },
                { name: "Kill Agheel with a +0 weapon" },
                { name: "Kill Tree Sentinel duo" },
                { name: "Kill Crucible Knight & Misbegotten Warrior duo" },
                { name: "Kill Elemer of the Briar" },
                { name: "Kill Putrid Crystalian trio" },
                { name: "Kill Wormface" },
                { name: "Kill Royal Revenant (Kingsrealm Ruins)" },
                { name: "Kill Greyoll without status effects" },
                { name: "Kill a Dragonkin Soldier" },
                { name: "Kill a Magma Wyrm boss" },
                { name: "Kill a Fallingstar Beast" },
                { name: "Kill a Black Blade Kindred" },
                { name: "Kill an Omenkiller boss" },
                { name: "Kill 1 Deathbird and 1 Death Rite Bird" },
                { name: "Kill 2 Cemetery Shades" },
                { name: "Kill 3 Watchdogs" },
                { name: "Kill 2 Duelist bosses" },
                { name: "Kill 2 Black Knife Assassins" },
                { name: "Kill 3 Crucible Knights" },
                { name: "Kill 3 Dragon Heart bosses" },
                { name: "Kill 3 Erdtree Avatars" },
                { name: "Kill 3 Night's Cavalry" },
                { name: "Kill 3 Tibia Mariners" },
                { name: "Kill 3 Bell Bearing Hunters" },
                { name: "Kill 3 duo/trio bosses" },
                { name: "Kill 5 bosses that ride a horse" },
                { name: "Kill 5 bosses with 'tree' in their name" },
                { name: "Kill a Remembrance boss hitless" },
                { name: "Kill a Remembrance boss colossal armaments only" },
                { name: "Kill a Remembrance boss daggers, claws, or fists only" },
                { name: "Kill a Remembrance boss bow only" },
                { name: "Kill a Remembrance boss sorcery only" },
                { name: "Kill a Remembrance boss incantations only" },
                { name: "Kill a Remembrance boss w/ remembrance weapon only" },
                { name: "Kill a boss Spirit Ashes only" },
                { name: "Kill a boss Consumables only" },
                { name: "Kill a boss on Torrent the whole fight" },
                { name: "Finish off a boss with the explosive physick" },
                { name: "Kill 8 bosses in Limgrave" },
                { name: "Kill 6 bosses in Liurnia" },
                { name: "Kill 5 bosses in Caelid" },
                { name: "Kill 5 bosses in Altus Plateau (no Volcano Manor)" },
                { name: "Complete 2 catacomb dungeons" },
                { name: "Complete 2 cave or grotto dungeons" },
                { name: "Complete 2 tunnel or precipice dungeons" },
                { name: "Complete an Altus Plateau Hero's Grave" },
                { name: "Complete 4 evergaols" },
                { name: "Acquire 4 different Remembrances" },
                { name: "Acquire full Dectus Medallion" },
                { name: "Acquire Somberstone Bell Bearing [1] and [2]" },
                { name: "Acquire Smithing-stone Bell Bearing [1] and [2]" },
                { name: "Acquire Grave and Ghost Glovewort Bell Bearings [1]" },
                { name: "Acquire 3 Imbued Sword Keys" },
                { name: "Acquire Margit's and Mohg's Shackles" },
                { name: "Restore Godrick’s Great Rune" },
                { name: "Restore Radahn’s Great Rune" },
                { name: "Restore Rykard’s Great Rune" },
                { name: "Restore Morgott’s Great Rune" },
                { name: "Somber +9 weapon" },
                { name: "Smithing-stone +12 weapon" },
                { name: "Spirit Ash +4 summon" },
                { name: "Sacred Flask +7" },
                { name: "10 Sacred Flask charges" },
                { name: "Acquire 10 Physick Flask tears" },
                { name: "Acquire 10 Cracked Pots" },
                { name: "Acquire 5 Ritual Pots" },
                { name: "Acquire 4 Memory Stones" },
                { name: "Acquire 3 Whetblades" },
                { name: "Acquire 2 legendary armaments" },
                { name: "Acquire 8 different Talismans" },
                { name: "Acquire 6 different Glintstone Staves" },
                { name: "Acquire 4 different Sacred Seals" },
                { name: "Acquire both Scarseal talismans" },
                { name: "Take Rya's hand to Volcano Manor" },
                { name: "Return Thop's academy key" },
                { name: "Acquire Fingerslayer Blade" },
                { name: "Invade and defeat Magnus the Beast Claw" },
                { name: "Dupe a Remembrance at a Mausoleum" },
                { name: "Memory of Grace with 50k+ Runes" },
                { name: "Kill 3 NPC invaders" },
                { name: "Kill 3 friendly NPCs (no hermit merchants)" },
                { name: "Kill Gurranq" },
                { name: "Sell Bloodhound's Fang +0" },
                { name: "Use AoW Lightning Ram to kill 10 sheep" },
                { name: "Learn 12 different sorceries" },
                { name: "Learn 14 different incantations" },
                { name: "Rune Level 60" },
                { name: "30 Faith (no rebirth or buffs)" },
                { name: "30 Intelligence (no rebirth or buffs)" },
            ];

            let markedCells = new Set();
            const winningLines = [
                [1, 2, 3, 4, 5],
                [6, 7, 8, 9, 10],
                [11, 12, 13, 14, 15],
                [16, 17, 18, 19, 20],
                [21, 22, 23, 24, 25],
                [1, 6, 11, 16, 21],
                [2, 7, 12, 17, 22],
                [3, 8, 13, 18, 23],
                [4, 9, 14, 19, 24],
                [5, 10, 15, 20, 25],
                [1, 7, 13, 19, 25],
                [5, 9, 13, 17, 21],
            ];
            var player1Check = [];
            var player2Check = [];

            function startBingo() {
                var list = [];

                for (let i = 1; i < 26; i++) {
                    do {
                        var randomNumer = Math.floor(Math.random() * bingo.length);
                    } while (list.includes(randomNumer));

                    const challenge = bingo[randomNumer];

                    list.push(randomNumer);

                    var table = document.getElementById(i);

                    table.innerHTML = challenge.name;
                }
            }

            function selectPlayer(color) {
                player = color;
                document.getElementById("selectedColor").style.color = color;

                if (document.getElementById("selectedColor").style.color == "rgb(230, 73, 114)") {
                    document.getElementById("selectedColor").innerHTML = "Eres el jugador 1";
                } else {
                    document.getElementById("selectedColor").innerHTML = "Eres el jugador 2";
                }
            }

            function handleClick(event) {
                if (
                    (!event.target.style.backgroundColor == "rgb(230, 73, 114)" ||
                        !event.target.style.backgroundColor == "rgb(88, 73, 230)" ||
                        event.target.style.backgroundColor == "") &&
                    winner == ""
                ) {
                    event.target.style.backgroundColor = player;

                    if (player == "#e64972") {
                        player1Score++;
                        player1Check.push(event.target.id);
                        document.getElementById("player1").innerHTML = "P1 " + player1Score;
                        checkWinner(player1Check);
                    } else if (player == "#5849e6") {
                        player2Score++;
                        player2Check.push(event.target.id);
                        document.getElementById("player2").innerHTML = "P2 " + player2Score;
                        checkWinner(player2Check);
                    }
                } else if (winner != "") {
                    Swal.fire({
                        title: "Ya ha habido un ganador!",
                        text: "Reinicie el bingo si quiere volver a hacerlo!",
                        icon: "error",
                    });
                }
            }

            function checkForWinningLine(playerCheck) {
                for (let i = 0; i < winningLines.length; i++) {
                    const currentLine = winningLines[i];
                    if (currentLine.every((num) => playerCheck.includes(num.toString()))) {
                        return true;
                    }
                }
                return false;
            }

            function checkWinner(player) {
                if (checkForWinningLine(player)) {
                    if (player == player1Check) {
                        winner = "Player 1";
                        Swal.fire({
                            title: "Ha ganado el jugador 1!",
                            text: "Al completar una linea entera en el bingo de Elden Ring!",
                            icon: "success",
                        });
                    } else {
                        winner = "Player 2";
                        Swal.fire({
                            title: "Ha ganado el jugador 2!",
                            text: "Al completar una linea entera en el bingo de Elden Ring!",
                            icon: "success",
                        });
                    }
                }

                if (player1Score == 13) {
                    if (winner == "") {
                        winner = "Player 1";
                        Swal.fire({
                            title: "Ha ganado el jugador 1!",
                            text: "Al conseguir 13 puntos en el bingo de Elden Ring!",
                            icon: "success",
                        });
                    }
                } else if (player2Score == 13) {
                    if (winner == "") {
                        winner = "Player 2";
                        Swal.fire({
                            title: "Ha ganado el jugador 2!",
                            text: "Al conseguir 13 puntos en el bingo de Elden Ring!",
                            icon: "success",
                        });
                    }
                }
            }

            function handleDoubleClick(event) {
                if (event.target.style.backgroundColor == "rgb(230, 73, 114)") {
                    player1Score--;
                    document.getElementById("player1").innerHTML = "P1 " + player1Score;
                    winner = "";
                } else if (event.target.style.backgroundColor == "rgb(88, 73, 230)") {
                    player2Score--;
                    document.getElementById("player2").innerHTML = "P2 " + player2Score;
                    winner = "";
                }
                event.target.style.backgroundColor = "";
            }

            document.querySelectorAll("td").forEach((td) => {
                td.addEventListener("click", handleClick);
                td.addEventListener("dblclick", handleDoubleClick);
            });
        </script>
    </body>
</html>
